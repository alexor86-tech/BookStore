# Инструкция по настройке личного кабинета

## Переменные окружения

Убедитесь, что в `.env` файле установлена переменная:

```
DATABASE_URL="your_postgresql_connection_string"
```

## Миграция базы данных

После обновления Prisma schema необходимо выполнить миграцию:

```bash
# Создать миграцию
npm run db:migrate

# Или использовать db:push для разработки (быстрее, но не создает файлы миграции)
npm run db:push
```

## Запуск проекта

```bash
# Установить зависимости (если еще не установлены)
npm install

# Сгенерировать Prisma Client
npx prisma generate

# Запустить dev сервер
npm run dev
```

## Структура личного кабинета

### Маршруты:
- `/dashboard` - Мои книги (список книг текущего пользователя)
- `/dashboard/public` - Публичные книги (все книги с isPublic = true)
- `/dashboard/favorites` - Избранное (книги с isFavorite = true)
- `/dashboard/history` - История (заглушка)
- `/dashboard/settings` - Настройки (заглушка)

### Функциональность:

1. **Создание книги**:
   - На странице "Мои книги" нажмите кнопку "+ Новая книга"
   - Заполните форму (название, содержание, публичность)
   - Нажмите "Создать"

2. **Редактирование книги**:
   - На карточке книги нажмите иконку карандаша (только для своих книг)
   - Внесите изменения
   - Нажмите "Сохранить"

3. **Удаление книги**:
   - На карточке книги нажмите иконку корзины (только для своих книг)
   - Подтвердите удаление

4. **Переключение публичности**:
   - На карточке книги нажмите иконку Globe (публичная) или Lock (приватная)
   - Изменение применяется сразу

5. **Добавление в избранное**:
   - На карточке книги нажмите иконку звезды
   - Звезда закрашивается желтым при добавлении в избранное

6. **Поиск**:
   - Используйте поле поиска для фильтрации по названию или содержанию
   - Поиск работает с debounce (300ms)

7. **Пагинация**:
   - Навигация по страницам внизу списка
   - По 10 книг на странице

## Проверка функциональности

### Шаг 1: Создание книги
1. Перейдите на `/dashboard`
2. Нажмите "+ Новая книга"
3. Заполните форму:
   - Название: "Тестовая книга"
   - Содержание: "Это тестовое содержание книги"
   - Публичность: включите/выключите переключатель
4. Нажмите "Создать"
5. Убедитесь, что книга появилась в списке

### Шаг 2: Редактирование книги
1. На карточке созданной книги нажмите иконку карандаша
2. Измените название или содержание
3. Нажмите "Сохранить"
4. Убедитесь, что изменения применились

### Шаг 3: Переключение публичности
1. На карточке книги нажмите иконку Globe/Lock
2. Убедитесь, что иконка изменилась
3. Перейдите на `/dashboard/public`
4. Если книга была сделана публичной, она должна появиться в списке

### Шаг 4: Добавление в избранное
1. На карточке книги нажмите иконку звезды
2. Убедитесь, что звезда закрасилась желтым
3. Перейдите на `/dashboard/favorites`
4. Убедитесь, что книга появилась в списке избранного

### Шаг 5: Удаление книги
1. На карточке книги нажмите иконку корзины
2. Подтвердите удаление
3. Убедитесь, что книга исчезла из списка

### Шаг 6: Поиск
1. Введите текст в поле поиска
2. Убедитесь, что список фильтруется по мере ввода (с задержкой 300ms)
3. Очистите поле поиска
4. Убедитесь, что список вернулся к исходному состоянию

## Примечания

- Все операции требуют авторизации
- Пользователь может редактировать/удалять только свои книги
- Публичные книги видны всем авторизованным пользователям
- Избранное работает глобально (isFavorite - поле в Book, не привязано к пользователю)
